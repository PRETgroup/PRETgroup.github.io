$.ajax("/pages/members.json").done(function(f){if(typeof f==="string"){members=JSON.parse(f)}else{members=f}var e=query_params.member;if(typeof e!=="undefined"&&e!==""){var l=null;for(var g=0;g<members.length;g++){if("key" in members[g]){if(e===members[g]["key"]){l=members[g];break}}}if(l===null){$("#members_holder").html('<div class="alert alert-danger text-center" style="margin-top: 100px; margin-bottom: 100px;">Member '+e+' not found!<br /><br /><a href="#!members">Return to member list</a>.</div>');return}var h='<div class="row">';h+='   <div class="col-sm-3 col-sm-push-9 text-center">';if("photo" in l){h+='       <img src="'+l.photo+'" style="max-width: 200px; max-height: 400px;" />'}h+="   </div>";h+='   <div class="col-sm-9 col-sm-pull-3">';h+="       <h2>";h+="           "+l.name;if("role" in l){h+='           <span class="small">('+getRoleNameForKey(l.role)+")</span>"}if("position" in l){h+='           <br /><span class="small">'+l.position+"</span>"}h+="       </h2>";if("contact" in l){var j=false;for(var n in l.contact){j=true;break}if(j){h+="       <h3>Contact Details</h3>";for(var a in l.contact){method_name=make_nice_header(a);var k=l.contact[a];if(a==="email"){k='<a href="mailto:'+l.contact[a]+'">'+l.contact[a]+"</a>"}h+='       </i> <span class="font-bold">'+method_name+"</span>: "+k+"<br />"}}}if("info" in l){for(var b in l.info){info_name=make_nice_header(b);h+="       <h3>"+info_name+"</h3>";h+="       "+l.info[b]}}h+="       <h3>";h+="           Publications";h+='           <span class="small" style="font-size: 60%;">';h+='               Sort By: <a href="#!members?member='+e+'&sort=year">Year</a>';h+='               | <a href="#!members?member='+e+'&sort=type">Type</a>';h+="           </span>";h+="       </h3>";h+='       <div id="publications_holder" class="padding-left-sm">';h+="       </div>";h+="   </div>";h+="</div>";$parsed=$($.parseHTML(h));$.ajax("/pages/publications.json").done(function(r){if(typeof f==="string"){publications=JSON.parse(r)}else{publications=r}sorted=[];keys=[];var q=query_params.sort;for(var p=0;p<publications.length;p++){n="Unknown";if(q==="type"){if("type" in publications[p]){n=getPaperTypeForKey(publications[p]["type"])}}else{if("year" in publications[p]){n=publications[p]["year"]}}if("our_authors" in publications[p]){if($.inArray(e,publications[p]["our_authors"])>-1){if(!sorted.hasOwnProperty(n)){sorted[n]=[];keys.push(n)}sorted[n].push(publications[p])}}}keys.sort();if(q!=="type"){keys.reverse()}var s='<div class="modal fade" id="bibtexModal" tabindex="-1" role="dialog" aria-labelledby="bibtexModalLabel">';s+='   <div class="modal-dialog modal-lg" role="document">';s+='       <div class="modal-content">';s+='           <div class="modal-header">';s+='               <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>';s+='               <h4 class="modal-title" id="exampleModalLabel">Bibtex</h4>';s+="           </div>";s+='           <div class="modal-body">';s+="           </div>";s+="       </div>";s+="   </div>";s+="</div>";for(var p=0;p<keys.length;p++){s+="<h4>"+keys[p]+"</h4>";s+="<ul>";for(var o=0;o<sorted[keys[p]].length;o++){s+="<li>"+getStringForPublication(sorted[keys[p]][o])+"</li>"}s+="</ul>"}if(keys.length==0){s+='<div class="alert alert-info text-center">No publications found.</div>'}$parsed.find("#publications_holder").html(s);$("#members_holder").html($parsed);$("#bibtexModal").on("show.bs.modal",function(v){var w=$(v.relatedTarget);var t=w.data("entry");var i=$("#"+t).html();var u=$(this);u.find(".modal-body").html("<pre>"+i+"</pre>")})}).fail(function(){$parsed.find("#publications_holder").html('<div class="alert alert-danger text-center">An error occured while fetching publications!</div>');$("#members_holder").html($parsed)})}else{var c={};for(var g=0;g<members.length;g++){var d="unknown";if("role" in members[g]&&members[g]["role"]!==""){d=members[g]["role"]}if(!c.hasOwnProperty(d)){c[d]=[]}c[d].push(members[g])}var h="";for(var d in c){var m=getRoleNameForKey(d);if(c[d].length>1){if(d!=="alumni"){m+="s"}}h+="       <h3>"+m+"</h3>";h+="<ul>";for(var g=0;g<c[d].length;g++){h+='<li><a href="#!members?member='+c[d][g]["key"]+'">'+c[d][g]["name"]+"</a></li>"}h+="</ul>"}$("#members_holder").html(h)}}).fail(function(){$("#members_holder").html('<div class="alert alert-danger text-center" style="margin-top: 100px; margin-bottom: 100px;">An error occured while fetching members...</div>')});